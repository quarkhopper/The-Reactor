/**
 * Developer Note (March 31, 2025):
 * 
 * Observations:
 * - The control rod locations are the only places with any temperature above zero.
 * - Heat gain and reactivity calculations seem to work in isolation, but the overall grid behavior is incorrect.
 * - Final tick stats show:
 *   - Average Temperature: 0.000
 *   - Max Temperature: -Infinity
 *   - Min Temperature: Infinity
 *   - Average Reactivity: 0.000
 *   - Max Reactivity: -Infinity
 *   - Min Reactivity: Infinity
 * 
 * Hypotheses:
 * 1. **Heat Diffusion Issue**:
 *    - Heat is not propagating correctly across the grid.
 *    - Neighboring cells might not be receiving heat from active cells.
 * 2. **Control Rod Interference Issue**:
 *    - Control rods might be suppressing reactivity too aggressively.
 *    - `INTERFERENCE_SCALING_FACTOR` could be too high.
 * 3. **Base Reactivity Issue**:
 *    - `NORMALIZATION_FACTOR` might be scaling base reactivity too low.
 *    - This could result in reactivity being zeroed out in most cells.
 * 
 * Next Steps:
 * 1. **Heat Diffusion**:
 *    - Add logs to verify heat transfer between neighboring cells.
 *    - Check if `HEAT_DIFFUSION_COEFFICIENT` is too low or if the diffusion logic is incorrect.
 *    - Log the temperature of all cells after each tick to confirm propagation.
 * 2. **Control Rod Interference**:
 *    - Log the `controlInterference` values for all cells.
 *    - Verify that control rods are reducing reactivity without over-suppressing.
 *    - Experiment with lowering `INTERFERENCE_SCALING_FACTOR`.
 * 3. **Base Reactivity**:
 *    - Log `baseReactivity` values for all cells.
 *    - Check if `NORMALIZATION_FACTOR` is appropriate for the grid size and reactivity range.
 *    - Experiment with reducing `NORMALIZATION_FACTOR` to increase base reactivity.
 * 
 * Debugging Tips:
 * - Add detailed logs for:
 *   - Heat diffusion calculations (e.g., heat transfer between cells).
 *   - Temperature values for all grid cells after each tick.
 *   - Reactivity and control interference values for all cells.
 * - Look for cells with non-zero reactivity but zero temperature, as this indicates a heat propagation issue.
 * 
 * Immediate Focus:
 * - Start with heat diffusion logic, as it directly impacts temperature propagation.
 * - If heat diffusion is working, move to control rod interference and base reactivity adjustments.
 */

## üõ†Ô∏è Dev Note: State Machine Migration Complete

### ‚úÖ What We Just Did:
- Removed the event bus system entirely
- Migrated all UI components to use the state machine architecture:
  - `VerticalMeter.tsx`
  - `ConditionLight.tsx`
  - `DigitalDisplay.tsx`
  - `KnobSelector.tsx`
  - `IndicatorLight.tsx`
  - `CircularGauge.tsx`
  - `MasterButton.tsx`
  - `ScramButton.tsx`

### üîÑ Key Changes:
1. **Component Standardization**:
   - All components now use `useTestable` hook for test mode
   - Components self-register with `registry.acknowledge(id)`
   - State changes flow through `stateMachine.emit()`

2. **Command System**:
   - Defined clear command types in `types.ts`
   - Commands now include:
     - Button states (`button_press`)
     - Knob positions (`knob_change`)
     - Power states (`state_change`)
     - Temperature updates (`temperature_update`)
     - Rod positions (`rod_position_update`)
     - And more...

3. **Test Mode**:
   - Each component handles its own test sequence
   - Test mode prevents real state updates
   - Components acknowledge completion to registry

### üéØ Current State:
- Clean, command-based architecture
- No more event bus dependencies
- Components communicate through state machine
- Test mode properly isolated
- Registry system for initialization tracking

### üîç Potential Next Steps:
1. **Command Validation**:
   - Add validation for command parameters
   - Ensure commands match expected types

2. **State Management**:
   - Review state transitions
   - Ensure proper cleanup on state changes

3. **Component Behavior**:
   - Verify all components respond correctly to commands
   - Check edge cases in state transitions

4. **Testing**:
   - Add unit tests for command handling
   - Verify test mode behavior

### üí° Notes:
- The system now more closely resembles real hardware control systems
- Command-based approach makes debugging easier
- Clear separation between UI events and system commands
- Better type safety through command definitions